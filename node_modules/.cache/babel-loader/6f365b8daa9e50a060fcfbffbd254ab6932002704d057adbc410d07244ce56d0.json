{"ast":null,"code":"const AUTH_LOCAL_STORAGE_KEY = 'kt-auth-react-v';\nconst getAuth = () => {\n  if (!localStorage) {\n    return;\n  }\n  const lsValue = localStorage.getItem(AUTH_LOCAL_STORAGE_KEY);\n  if (!lsValue) {\n    return;\n  }\n  try {\n    const auth = JSON.parse(lsValue);\n    if (auth) {\n      // You can easily check auth_token expiration also\n      return auth;\n    }\n  } catch (error) {\n    console.error('AUTH LOCAL STORAGE PARSE ERROR', error);\n  }\n};\nconst setAuth = auth => {\n  if (!localStorage) {\n    return;\n  }\n  try {\n    const lsValue = JSON.stringify(auth);\n    localStorage.setItem(AUTH_LOCAL_STORAGE_KEY, lsValue);\n  } catch (error) {\n    console.error('AUTH LOCAL STORAGE SAVE ERROR', error);\n  }\n};\nconst removeAuth = () => {\n  if (!localStorage) {\n    return;\n  }\n  try {\n    localStorage.removeItem(AUTH_LOCAL_STORAGE_KEY);\n  } catch (error) {\n    console.error('AUTH LOCAL STORAGE REMOVE ERROR', error);\n  }\n};\nexport function setupAxios(axios) {\n  axios.defaults.headers.Accept = 'application/json';\n  axios.interceptors.request.use(config => {\n    const auth = getAuth();\n    if (auth && auth.api_token) {\n      config.headers.Authorization = `Bearer ${auth.api_token}`;\n    }\n    return config;\n  }, err => Promise.reject(err));\n}\nexport { getAuth, setAuth, removeAuth, AUTH_LOCAL_STORAGE_KEY };","map":{"version":3,"names":["AUTH_LOCAL_STORAGE_KEY","getAuth","localStorage","lsValue","getItem","auth","JSON","parse","error","console","setAuth","stringify","setItem","removeAuth","removeItem","setupAxios","axios","defaults","headers","Accept","interceptors","request","use","config","api_token","Authorization","err","Promise","reject"],"sources":["E:/GENText/src/app/modules/auth/core/AuthHelpers.ts"],"sourcesContent":["import {AuthModel} from './_models'\n\nconst AUTH_LOCAL_STORAGE_KEY = 'kt-auth-react-v'\nconst getAuth = (): AuthModel | undefined => {\n  if (!localStorage) {\n    return\n  }\n\n  const lsValue: string | null = localStorage.getItem(AUTH_LOCAL_STORAGE_KEY)\n  if (!lsValue) {\n    return\n  }\n\n  try {\n    const auth: AuthModel = JSON.parse(lsValue) as AuthModel\n    if (auth) {\n      // You can easily check auth_token expiration also\n      return auth\n    }\n  } catch (error) {\n    console.error('AUTH LOCAL STORAGE PARSE ERROR', error)\n  }\n}\n\nconst setAuth = (auth: AuthModel) => {\n  if (!localStorage) {\n    return\n  }\n\n  try {\n    const lsValue = JSON.stringify(auth)\n    localStorage.setItem(AUTH_LOCAL_STORAGE_KEY, lsValue)\n  } catch (error) {\n    console.error('AUTH LOCAL STORAGE SAVE ERROR', error)\n  }\n}\n\nconst removeAuth = () => {\n  if (!localStorage) {\n    return\n  }\n\n  try {\n    localStorage.removeItem(AUTH_LOCAL_STORAGE_KEY)\n  } catch (error) {\n    console.error('AUTH LOCAL STORAGE REMOVE ERROR', error)\n  }\n}\n\nexport function setupAxios(axios: any) {\n  axios.defaults.headers.Accept = 'application/json'\n  axios.interceptors.request.use(\n    (config: {headers: {Authorization: string}}) => {\n      const auth = getAuth()\n      if (auth && auth.api_token) {\n        config.headers.Authorization = `Bearer ${auth.api_token}`\n      }\n\n      return config\n    },\n    (err: any) => Promise.reject(err)\n  )\n}\n\nexport {getAuth, setAuth, removeAuth, AUTH_LOCAL_STORAGE_KEY}\n"],"mappings":"AAEA,MAAMA,sBAAsB,GAAG,iBAAiB;AAChD,MAAMC,OAAO,GAAGA,CAAA,KAA6B;EAC3C,IAAI,CAACC,YAAY,EAAE;IACjB;EACF;EAEA,MAAMC,OAAsB,GAAGD,YAAY,CAACE,OAAO,CAACJ,sBAAsB,CAAC;EAC3E,IAAI,CAACG,OAAO,EAAE;IACZ;EACF;EAEA,IAAI;IACF,MAAME,IAAe,GAAGC,IAAI,CAACC,KAAK,CAACJ,OAAO,CAAc;IACxD,IAAIE,IAAI,EAAE;MACR;MACA,OAAOA,IAAI;IACb;EACF,CAAC,CAAC,OAAOG,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;EACxD;AACF,CAAC;AAED,MAAME,OAAO,GAAIL,IAAe,IAAK;EACnC,IAAI,CAACH,YAAY,EAAE;IACjB;EACF;EAEA,IAAI;IACF,MAAMC,OAAO,GAAGG,IAAI,CAACK,SAAS,CAACN,IAAI,CAAC;IACpCH,YAAY,CAACU,OAAO,CAACZ,sBAAsB,EAAEG,OAAO,CAAC;EACvD,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;EACvD;AACF,CAAC;AAED,MAAMK,UAAU,GAAGA,CAAA,KAAM;EACvB,IAAI,CAACX,YAAY,EAAE;IACjB;EACF;EAEA,IAAI;IACFA,YAAY,CAACY,UAAU,CAACd,sBAAsB,CAAC;EACjD,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;EACzD;AACF,CAAC;AAED,OAAO,SAASO,UAAUA,CAACC,KAAU,EAAE;EACrCA,KAAK,CAACC,QAAQ,CAACC,OAAO,CAACC,MAAM,GAAG,kBAAkB;EAClDH,KAAK,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAC3BC,MAA0C,IAAK;IAC9C,MAAMlB,IAAI,GAAGJ,OAAO,CAAC,CAAC;IACtB,IAAII,IAAI,IAAIA,IAAI,CAACmB,SAAS,EAAE;MAC1BD,MAAM,CAACL,OAAO,CAACO,aAAa,GAAI,UAASpB,IAAI,CAACmB,SAAU,EAAC;IAC3D;IAEA,OAAOD,MAAM;EACf,CAAC,EACAG,GAAQ,IAAKC,OAAO,CAACC,MAAM,CAACF,GAAG,CAClC,CAAC;AACH;AAEA,SAAQzB,OAAO,EAAES,OAAO,EAAEG,UAAU,EAAEb,sBAAsB"},"metadata":{},"sourceType":"module","externalDependencies":[]}